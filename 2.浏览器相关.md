### 浏览器相关

> 浏览器渲染的主要流程是什么?

- 将 hmtl 代码按照深度优先遍历生成 dom 树
- css 文件下载后完成后进行渲染，生成 cssom 树
- css 文件下载完成后并且所有的 cssom 树构建结束后和 dom 生成 render tree
- 浏览器进入 Layout 环节，计算所有的节点位置
- 通过 painting 环节将所有的接点在屏幕中呈现

> 从输入 url 到页面渲染完成都经过了什么？

- 输入 url 并回车
- 浏览器会查找当前 url 是否存在缓存，并且比较缓存是否过期
- 通过 DNS 解析 url 获取 IP
- 根据 ip 建立 TCP 连接（三次握手如下）
- http 发起请求
- 服务器处理请求，浏览器接收 http 响应
- 渲染页面，构建 dom 树
- 关闭 TCP 连接（四次挥手如下）

> TCP 握手协议 ：在 TCP/IP 协议中 bai,TCP 协议提供可靠的连接 du 服务,采用三次握手建立 zhi 一个连接

1. 第一次握手：bai 建立连接时,客户端发送 syn 包(syn=j)到服务器,并进入 SYN_SEND 状态,等待服务器确认； SYN：同步序列编号(Synchronize Sequence Numbers)
2. 第二次握手：服务器收到 syn 包,必须确认客户的 SYN（ack=j+1）,同时自己也发送一个 SYN 包（syn=k）,即 SYN+ACK 包,此时服务器进入 SYN_RECV 状态；
3. 第三次握手：客户端收到服务器的 SYN ＋ ACK 包,向服务器发送确认包 ACK(ack=k+1),此包发送完毕,客户端和服务器进入 ESTABLISHED 状态,完成三次握手。
   > TCP 四次挥手
4. 第一次挥手：Client 发送一个 FIN，用来关闭 Client 到 Server 的数据传送，Client 进入 FIN_WAIT_1 状态；
5. 第二次挥手：Server 收到 FIN 后，发送一个 ACK 给 Client，确认序号为收到序号+1（与 SYN 相同，一个 FIN 占用一个序号），Server 进入 CLOSE_WAIT 状态；
6. 第三次挥手：Server 发送一个 FIN，用来关闭 Server 到 Client 的数据传送，Server 进入 LAST_ACK 状态；
7. 第四次挥手：Client 收到 FIN 后，Client 进入 TIME_WAIT 状态，接着发送一个 ACK 给 Server，确认序号为收到的序号+1，Server 进入 CLOSED 状态，完成四次挥手；

> 什么是优雅降级和渐进增强
- 优雅降级：web 站点在目前的新式浏览起都可以正常工作，如果用户使用的是老式浏览器，则代码会检查是否可以正常运行。像使用 ie 的话，就有独特的盒模型布局问题。针对不同版本的 ie 的 hack 实行优雅降级，为那些无法支持功能的浏览器增加候选方案，使之在旧式浏览器上以某种形式降级体验却不至于完全失效。
- 渐进增强：从被所有浏览器都支持的基础功能开始，逐步添加新式浏览器新增的支持的功能，往页面添加对基础版本没有影响的新功能及样式，浏览器支持时，它会自动呈现出来。
> 便于理解的概念：
- 优雅降级：一开始就构建完整的功能，然后再针对低版本进行兼容。
- 渐进增强：针对低版本浏览器进行功能开发，然后再针对更高级的浏览器进行效果、交互的改进和追加，给用户更好的体验。
> 两者的区别：
优雅降级是一开始就从复杂的现状开始，试图减少用户的体验供给，渐进增强是一开始就从基础的现状开始，然后不断的扩充，以适应未来的环境需求。优雅降级意味着往回看，需要对原来的代码进行更多的修改维护，渐进增强则意味着朝前看，对原有的代码进行着不断的更新迭代，同时保证根基处于一个安全地带。





