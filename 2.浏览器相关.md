### 浏览器相关

> 浏览器渲染的主要流程是什么?
- 将 hmtl 代码按照深度优先遍历生成 dom 树
- css 文件下载后完成后进行渲染，生成 cssom 树
- css 文件下载完成后并且所有的 cssom 树构建结束后和 dom 生成 render tree
- 浏览器进入 Layout 环节，计算所有的节点位置
- 通过 painting 环节将所有的接点在屏幕中呈现

> 从输入 url 到页面渲染完成都经过了什么？
- 输入 url 并回车
- 浏览器会查找当前 url 是否存在缓存，并且比较缓存是否过期
- 通过 DNS 解析 url 获取 IP
- 根据 ip 建立 TCP 连接（三次握手如下）
- http 发起请求
- 服务器处理请求，浏览器接收 http 响应
- 渲染页面，构建 dom 树
- 关闭 TCP 连接（四次挥手如下）
   > TCP 握手协议 ：在 TCP/IP 协议中,TCP 协议提供可靠的连接服务,采用三次握手建立一个连接
    1. 第一次握手：建立连接时,客户端发送 syn 包(syn=j)到服务器,并进入 SYN_SEND 状态,等待服务器确认； SYN：同步序列编号(Synchronize Sequence Numbers)
    2. 第二次握手：服务器收到 syn 包,必须确认客户的 SYN（ack=j+1）,同时自己也发送一个 SYN 包（syn=k）,即 SYN+ACK 包,此时服务器进入 SYN_RECV 状态；
    3. 第三次握手：客户端收到服务器的 SYN ＋ ACK 包,向服务器发送确认包 ACK(ack=k+1),此包发送完毕,客户端和服务器进入 ESTABLISHED 状态,完成三次握手。
   > TCP 四次挥手
    1. 第一次挥手：Client 发送一个 FIN，用来关闭 Client 到 Server 的数据传送，Client 进入 FIN_WAIT_1 状态；
    2. 第二次挥手：Server 收到 FIN 后，发送一个 ACK 给 Client，确认序号为收到序号+1（与 SYN 相同，一个 FIN 占用一个序号），Server 进入 CLOSE_WAIT 状态；
    3. 第三次挥手：Server 发送一个 FIN，用来关闭 Server 到 Client 的数据传送，Server 进入 LAST_ACK 状态；
    4. 第四次挥手：Client 收到 FIN 后，Client 进入 TIME_WAIT 状态，接着发送一个 ACK 给 Server，确认序号为收到的序号+1，Server 进入 CLOSED 状态，完成四次挥手；

> 什么是优雅降级和渐进增强
- 优雅降级：web 站点在目前的新式浏览起都可以正常工作，如果用户使用的是老式浏览器，则代码会检查是否可以正常运行。像使用 ie 的话，就有独特的盒模型布局问题。针对不同版本的 ie 的 hack 实行优雅降级，为那些无法支持功能的浏览器增加候选方案，使之在旧式浏览器上以某种形式降级体验却不至于完全失效。
- 渐进增强：从被所有浏览器都支持的基础功能开始，逐步添加新式浏览器新增的支持的功能，往页面添加对基础版本没有影响的新功能及样式，浏览器支持时，它会自动呈现出来。
  > 便于理解的概念：
    - 优雅降级：一开始就构建完整的功能，然后再针对低版本进行兼容。
    - 渐进增强：针对低版本浏览器进行功能开发，然后再针对更高级的浏览器进行效果、交互的改进和追加，给用户更好的体验。
  > 两者的区别：
     - 优雅降级是一开始就从复杂的现状开始，试图减少用户的体验供给，渐进增强是一开始就从基础的现状开始，然后不断的扩充，以适应未来的环境需求。优雅降级意味着往回看，需要对原来的代码进行更多的修改维护，渐进增强则意味着朝前看，对原有的代码进行着不断的更新迭代，同时保证根基处于一个安全地带。


> 浏览器的垃圾回收机制
- 由于字符串、数组、对象没有固定大小，只有他们的大小已知的时候，才能对他们进行内存分配。
- js每次创建字符串、数组或对象时，解释器都必须分配内存来存储那个实体。动态分配的内存最终都是需要释放的，以便能够继续再利用。否则的话一直占用系统内存会最终会造成系统崩溃。
- 现在各大浏览器采用的垃圾回收的方式有2中：标记清除、引用计数：
- 标记清除：大部分浏览器以此方式进行垃圾回收，当变量进入执行环境的时候，垃圾回收将其标记为‘进入环境’，当执行结束之后，标记为‘离开环境’。在离开环境之后没有被标记为‘离开环境’的变量则是需要被删除的变量。标记方式不定，可以是某个特殊位的反转或维护一个列表等。垃圾收集器给所有的变量都加上标记，然后去掉环境中的变量以及被环境中的变量引用的变量的标记。在此之后再被加上的变量就是需要被回收的变量，因为环境中的变量已无法访问到这些变量。
- 引用计数：这是一种不被常用的垃圾回收策略。引用计数的含义是跟踪记录每个值被引用的次数。当声明了一个变量并将一个引用类型赋值给该变量时，则这个值的引用次数就是1。相反，如果包含对这个值引用的变量又取得了另外一个值，则这个值的引用次数就减1。当这个引用次数变成0时，则说明没有办法再访问这个值了，因而就可以将其所占的内存空间给收回。这样，垃圾收集器下次再运行时，它就会释放哪些引用次数为0的值所占的内存。该方式会引起内存泄漏的原因是它不能解决循环引用的问题。

> http和https的区别
- http协议也就是超文本传输协议，是一种使用明文传输数据的网络协议。一直以来http协议都是最主流的网页协议，http协议被用于在web浏览器和网站之间传递信息，以明文的方式传输发送内容，不提供任何方式的数据加密，如果攻击者截取了web浏览器和网站服务器之间的传输报文，就可以读懂其中的信息。
- https是在http的基础上加入了ssl/tls协议，ssl/tls依靠证书来验证服务器的身份，并为浏览器和服务器之间的通信加密。https协议可以理解为http协议的升级，就是在http的基础上增加了数据加密。在数据传输之前，对数据进行加密，然后再发送到服务器。这样，就算数据被第三者所截获，但是由于数据是加密的，所以你的个人信息仍然是安全的。这就是http和https的最大区别

